<!--{% extends 'base.html' %}-->
<!--{% load url from future %}-->
<!--{% block main_content %}-->
<div class="row-fluid">
   <div class="span12">
      <h3 class="row-fluid smaller lighter blue">
         <span class="span2">
            Users
         </span>
         <span class="pull-right" ng-switch="request.session.external_auth">
            <a ng-switch-when="undefined" href='#' ng-click="createUser()">
               <button class="btn btn-success btn-small">
                  <i class="icon-plus"></i>
                  Create
               </button>
            </a>
            <a ng-switch-default href='#'>
               <button class="btn btn-grey btn-small popover-notitle" data-rel="popover" data-placement="left" data-content='Cannot create users when external authentication is enabled'>
                  <i class="icon-plus"></i>
                  Create
               </button>
            </a>
         </span>
      </h3>

      <div class="space-6"></div>

      <div class="space-6"></div>

      <table id="users_table" class="table table-striped table-bordered table-hover bd-table" >
         <!--{% include 'table_headers.html' %}-->
         <tbody ng-repeat="row in data">
            <tr>
               <td style="display:none">{{ row.id }}</td>
               <td class="row-extras-link">{{ row.name }}</td>
               <td>{{ row.description }}</td>
               <td>{{ row.num_tenants }}</td>
               <td ng-if=row.is_external>External Authentication</td>
               <td ng-if="!row.is_external">Internal</td>

               <td>
                  <div class="visible-desktop action-buttons row-actions"></div>
               </td>
            </tr>
         </tbody>
      </table>
   </div>
</div>

<div class="row-fluid">
   <div class="span12">
      <div class="hr hr32 "></div>

      <h3 class="row-fluid header smaller lighter blue">Sessions</h3>
      <div class="widget-box transparent no-border" id='sessionsTable'>
         <div class="widget-header widget-header-large no-border">
            <h4></h4>
            <div class="widget-toolbar no-border">
               <a href='#'>
                  <button class="btn btn-danger btn-small table_delete">
                     <i class="icon-trash"></i>
                     Delete
                  </button>
               </a>
            </div>
         </div>
      </div>

      <table id="user_sessions" class="table table-striped table-bordered table-hover bd-table" >
         <!--{% include 'table_headers.html' with headers=session_headers %}-->
         <tbody ng-repeat="row in session_list">
            <tr>
               <td class='center'>
                  <label><input type='checkbox'/><span class="lbl"></span></label>
               </td>
               <td style="display:none">{{ row.id }}</td>
               <td>{{ row.user_name }}</td>
               <td>{{ row.tenant_name }}</td>
               <td>{{ row.role_name }}</td>
               <td>{{ row.expiry }}</td>
               <td>
                  <div class="visible-desktop action-buttons session-actions"></div>
               </td>
            </tr>
         </tbody>
      </table>
   </div>
</div>
